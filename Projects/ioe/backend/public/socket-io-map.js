{
    version: 3,
    sources: [
    "webpack://io/webpack/universalModuleDefinition",
    "webpack://io/webpack/bootstrap",
    "webpack://io/./build/index.js",
    "webpack://io/./build/manager.js",
    "webpack://io/./build/on.js",
    "webpack://io/./build/socket.js",
    "webpack://io/./build/url.js",
    "webpack://io/./node_modules/backo2/index.js",
    "webpack://io/./node_modules/component-emitter/index.js",
    "webpack://io/./node_modules/debug/src/browser.js",
    "webpack://io/./node_modules/debug/src/common.js",
    "webpack://io/./node_modules/engine.io-client/lib/globalThis.browser.js",
    "webpack://io/./node_modules/engine.io-client/lib/index.js",
    "webpack://io/./node_modules/engine.io-client/lib/socket.js",
    "webpack://io/./node_modules/engine.io-client/lib/transport.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/index.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/polling-jsonp.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/polling-xhr.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/polling.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js",
    "webpack://io/./node_modules/engine.io-client/lib/transports/websocket.js",
    "webpack://io/./node_modules/engine.io-client/lib/util.js",
    "webpack://io/./node_modules/engine.io-client/lib/xmlhttprequest.js",
    "webpack://io/./node_modules/engine.io-parser/lib/commons.js",
    "webpack://io/./node_modules/engine.io-parser/lib/decodePacket.browser.js",
    "webpack://io/./node_modules/engine.io-parser/lib/encodePacket.browser.js",
    "webpack://io/./node_modules/engine.io-parser/lib/index.js",
    "webpack://io/./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js",
    "webpack://io/./node_modules/has-cors/index.js",
    "webpack://io/./node_modules/ms/index.js",
    "webpack://io/./node_modules/parseqs/index.js",
    "webpack://io/./node_modules/parseuri/index.js",
    "webpack://io/./node_modules/socket.io-parser/dist/binary.js",
    "webpack://io/./node_modules/socket.io-parser/dist/index.js",
    "webpack://io/./node_modules/socket.io-parser/dist/is-binary.js",
    "webpack://io/./node_modules/yeast/index.js"
    ],
    names: [
    "Object",
    "defineProperty",
    "exports",
    "value",
    "Socket",
    "io",
    "Manager",
    "protocol",
    "url_1",
    "require",
    "manager_1",
    "socket_1",
    "enumerable",
    "get",
    "debug",
    "module",
    "lookup",
    "cache",
    "managers",
    "uri",
    "opts",
    "undefined",
    "parsed",
    "url",
    "path",
    "source",
    "id",
    "sameNamespace",
    "newConnection",
    "forceNew",
    "multiplex",
    "query",
    "queryKey",
    "socket",
    "socket_io_parser_1",
    "connect",
    "manager_2",
    "eio",
    "Emitter",
    "parser",
    "on_1",
    "Backoff",
    "nsps",
    "subs",
    "reconnection",
    "reconnectionAttempts",
    "Infinity",
    "reconnectionDelay",
    "reconnectionDelayMax",
    "randomizationFactor",
    "backoff",
    "min",
    "max",
    "jitter",
    "timeout",
    "_readyState",
    "_parser",
    "encoder",
    "Encoder",
    "decoder",
    "Decoder",
    "_autoConnect",
    "autoConnect",
    "open",
    "v",
    "arguments",
    "length",
    "_reconnection",
    "_reconnectionAttempts",
    "_a",
    "_reconnectionDelay",
    "setMin",
    "_randomizationFactor",
    "setJitter",
    "_reconnectionDelayMax",
    "setMax",
    "_timeout",
    "_reconnecting",
    "attempts",
    "reconnect",
    "fn",
    "indexOf",
    "engine",
    "self",
    "skipReconnect",
    "openSubDestroy",
    "on",
    "onopen",
    "errorSub",
    "err",
    "cleanup",
    "maybeReconnectOnOpen",
    "timer",
    "setTimeout",
    "close",
    "emit",
    "Error",
    "push",
    "subDestroy",
    "clearTimeout",
    "onping",
    "bind",
    "ondata",
    "onerror",
    "onclose",
    "ondecoded",
    "data",
    "add",
    "packet",
    "nsp",
    "keys",
    "active",
    "_close",
    "encodedPackets",
    "encode",
    "i",
    "write",
    "options",
    "forEach",
    "destroy",
    "reset",
    "reason",
    "delay",
    "duration",
    "onreconnect",
    "attempt",
    "obj",
    "ev",
    "off",
    "RESERVED_EVENTS",
    "freeze",
    "connect_error",
    "disconnect",
    "disconnecting",
    "newListener",
    "removeListener",
    "receiveBuffer",
    "sendBuffer",
    "ids",
    "acks",
    "flags",
    "connected",
    "disconnected",
    "auth",
    "onpacket",
    "subEvents",
    "args",
    "unshift",
    "apply",
    "hasOwnProperty",
    "type",
    "PacketType",
    "EVENT",
    "compress",
    "pop",
    "isTransportWritable",
    "transport",
    "writable",
    "discardPacket",
    "_packet",
    "CONNECT",
    "sid",
    "onconnect",
    "onevent",
    "BINARY_EVENT",
    "ACK",
    "onack",
    "BINARY_ACK",
    "DISCONNECT",
    "ondisconnect",
    "CONNECT_ERROR",
    "message",
    "ack",
    "emitEvent",
    "_anyListeners",
    "listeners",
    "slice",
    "listener",
    "sent",
    "emitBuffered",
    "splice",
    "parseuri",
    "loc",
    "location",
    "host",
    "charAt",
    "test",
    "port",
    "ipv6",
    "href",
    "ms",
    "factor",
    "prototype",
    "Math",
    "pow",
    "rand",
    "random",
    "deviation",
    "floor",
    "mixin",
    "key",
    "addEventListener",
    "event",
    "_callbacks",
    "once",
    "removeAllListeners",
    "removeEventListener",
    "callbacks",
    "cb",
    "Array",
    "len",
    "hasListeners",
    "formatArgs",
    "save",
    "load",
    "useColors",
    "storage",
    "localstorage",
    "warned",
    "console",
    "warn",
    "colors",
    "window",
    "process",
    "__nwjs",
    "navigator",
    "userAgent",
    "toLowerCase",
    "match",
    "document",
    "documentElement",
    "style",
    "WebkitAppearance",
    "firebug",
    "exception",
    "table",
    "parseInt",
    "RegExp",
    "$1",
    "namespace",
    "humanize",
    "diff",
    "c",
    "color",
    "index",
    "lastC",
    "replace",
    "log",
    "namespaces",
    "setItem",
    "removeItem",
    "error",
    "r",
    "getItem",
    "env",
    "DEBUG",
    "localStorage",
    "formatters",
    "j",
    "JSON",
    "stringify",
    "setup",
    "createDebug",
    "coerce",
    "disable",
    "enable",
    "enabled",
    "names",
    "skips",
    "selectColor",
    "hash",
    "charCodeAt",
    "abs",
    "prevTime",
    "enableOverride",
    "curr",
    "Number",
    "Date",
    "prev",
    "format",
    "formatter",
    "val",
    "call",
    "logFn",
    "extend",
    "configurable",
    "set",
    "init",
    "delimiter",
    "newDebug",
    "split",
    "substr",
    "map",
    "toNamespace",
    "join",
    "name",
    "regexp",
    "toString",
    "substring",
    "stack",
    "Function",
    "Transport",
    "transports",
    "parseqs",
    "hostname",
    "secure",
    "readyState",
    "writeBuffer",
    "prevBufferLen",
    "agent",
    "withCredentials",
    "upgrade",
    "jsonp",
    "timestampParam",
    "rememberUpgrade",
    "rejectUnauthorized",
    "perMessageDeflate",
    "threshold",
    "transportOptions",
    "decode",
    "upgrades",
    "pingInterval",
    "pingTimeout",
    "pingTimeoutTimer",
    "clone",
    "EIO",
    "priorWebsocketSuccess",
    "createTransport",
    "e",
    "shift",
    "setTransport",
    "onDrain",
    "onPacket",
    "onError",
    "onClose",
    "probe",
    "failed",
    "onTransportOpen",
    "onlyBinaryUpgrades",
    "upgradeLosesBinary",
    "supportsBinary",
    "send",
    "msg",
    "upgrading",
    "pause",
    "flush",
    "freezeTransport",
    "onTransportClose",
    "onupgrade",
    "to",
    "l",
    "onHandshake",
    "parse",
    "resetPingTimeout",
    "sendPacket",
    "code",
    "filterUpgrades",
    "onOpen",
    "waitForUpgrade",
    "cleanupAndClose",
    "desc",
    "pingIntervalTimer",
    "filteredUpgrades",
    "o",
    "description",
    "doOpen",
    "doClose",
    "packets",
    "decodePacket",
    "binaryType",
    "XMLHttpRequest",
    "XHR",
    "JSONP",
    "websocket",
    "polling",
    "xhr",
    "xd",
    "xs",
    "isSSL",
    "xdomain",
    "xscheme",
    "forceJSONP",
    "Polling",
    "globalThis",
    "rNewline",
    "rEscapedNewline",
    "empty",
    "JSONPPolling",
    "___eio",
    "onData",
    "script",
    "parentNode",
    "removeChild",
    "form",
    "iframe",
    "createElement",
    "async",
    "src",
    "insertAt",
    "getElementsByTagName",
    "insertBefore",
    "head",
    "body",
    "appendChild",
    "isUAgecko",
    "area",
    "iframeId",
    "className",
    "position",
    "top",
    "left",
    "target",
    "method",
    "setAttribute",
    "action",
    "complete",
    "initIframe",
    "html",
    "submit",
    "attachEvent",
    "onreadystatechange",
    "onload",
    "pick",
    "hasXHR2",
    "responseType",
    "forceBase64",
    "Request",
    "req",
    "request",
    "pollXhr",
    "create",
    "extraHeaders",
    "setDisableHeaderCheck",
    "setRequestHeader",
    "requestTimeout",
    "hasXDR",
    "onLoad",
    "responseText",
    "status",
    "requestsCount",
    "requests",
    "onSuccess",
    "fromError",
    "abort",
    "XDomainRequest",
    "enablesXDR",
    "unloadHandler",
    "terminationEvent",
    "yeast",
    "poll",
    "onPause",
    "total",
    "doPoll",
    "callback",
    "decodePayload",
    "encodePayload",
    "doWrite",
    "schema",
    "timestampRequests",
    "b64",
    "WebSocket",
    "MozWebSocket",
    "usingBrowserWebSocket",
    "defaultBinaryType",
    "isReactNative",
    "product",
    "WS",
    "check",
    "protocols",
    "headers",
    "ws",
    "addEventListeners",
    "onmessage",
    "encodePacket",
    "Buffer",
    "byteLength",
    "done",
    "attr",
    "reduce",
    "acc",
    "k",
    "hasCORS",
    "concat",
    "PACKET_TYPES",
    "PACKET_TYPES_REVERSE",
    "ERROR_PACKET",
    "withNativeArrayBuffer",
    "ArrayBuffer",
    "base64decoder",
    "encodedPacket",
    "mapBinary",
    "decodeBase64Packet",
    "packetType",
    "decoded",
    "base64",
    "Blob",
    "withNativeBlob",
    "isView",
    "buffer",
    "encodeBlobAsBase64",
    "fileReader",
    "FileReader",
    "content",
    "result",
    "readAsDataURL",
    "SEPARATOR",
    "String",
    "fromCharCode",
    "count",
    "encodedPayload",
    "decodedPacket",
    "chars",
    "arraybuffer",
    "bytes",
    "Uint8Array",
    "bufferLength",
    "p",
    "encoded1",
    "encoded2",
    "encoded3",
    "encoded4",
    "s",
    "m",
    "h",
    "d",
    "w",
    "y",
    "isFinite",
    "fmtLong",
    "fmtShort",
    "str",
    "exec",
    "n",
    "parseFloat",
    "msAbs",
    "round",
    "plural",
    "isPlural",
    "encodeURIComponent",
    "qs",
    "qry",
    "pairs",
    "pair",
    "decodeURIComponent",
    "re",
    "parts",
    "b",
    "authority",
    "ipv6uri",
    "pathNames",
    "regx",
    "$0",
    "$2",
    "reconstructPacket",
    "deconstructPacket",
    "is_binary_1",
    "buffers",
    "packetData",
    "pack",
    "_deconstructPacket",
    "attachments",
    "isBinary",
    "placeholder",
    "_placeholder",
    "num",
    "isArray",
    "newData",
    "_reconstructPacket",
    "binary_1",
    "hasBinary",
    "encodeAsBinary",
    "encodeAsString",
    "deconstruction",
    "decodeString",
    "reconstructor",
    "BinaryReconstructor",
    "takeBinaryData",
    "start",
    "buf",
    "next",
    "payload",
    "tryParse",
    "isPayloadValid",
    "finishedReconstruction",
    "reconPack",
    "binData",
    "withNativeFile",
    "File",
    "toJSON",
    "alphabet",
    "seed",
    "encoded",
    "now"
    ],
    mappings: "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",
    file: "socket.io.js",
    sourcesContent: [
    "(function webpackUniversalModuleDefinition(root, factory) { if(typeof exports === 'object' && typeof module === 'object') module.exports = factory(); else if(typeof define === 'function' && define.amd) define([], factory); else if(typeof exports === 'object') exports["io"] = factory(); else root["io"] = factory(); })(window, function() { return ",
    " // The module cache var installedModules = {}; // The require function function __webpack_require__(moduleId) { // Check if module is in cache if(installedModules[moduleId]) { return installedModules[moduleId].exports; } // Create a new module (and put it into the cache) var module = installedModules[moduleId] = { i: moduleId, l: false, exports: {} }; // Execute the module function modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); // Flag the module as loaded module.l = true; // Return the exports of the module return module.exports; } // expose the modules object (__webpack_modules__) __webpack_require__.m = modules; // expose the module cache __webpack_require__.c = installedModules; // define getter function for harmony exports __webpack_require__.d = function(exports, name, getter) { if(!__webpack_require__.o(exports, name)) { Object.defineProperty(exports, name, { enumerable: true, get: getter }); } }; // define __esModule on exports __webpack_require__.r = function(exports) { if(typeof Symbol !== 'undefined' && Symbol.toStringTag) { Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); } Object.defineProperty(exports, '__esModule', { value: true }); }; // create a fake namespace object // mode & 1: value is a module id, require it // mode & 2: merge all properties of value into the ns // mode & 4: return value when already ns object // mode & 8|1: behave like require __webpack_require__.t = function(value, mode) { if(mode & 1) value = __webpack_require__(value); if(mode & 8) return value; if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value; var ns = Object.create(null); __webpack_require__.r(ns); Object.defineProperty(ns, 'default', { enumerable: true, value: value }); if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); return ns; }; // getDefaultExport function for compatibility with non-harmony modules __webpack_require__.n = function(module) { var getter = module && module.__esModule ? function getDefault() { return module['default']; } : function getModuleExports() { return module; }; __webpack_require__.d(getter, 'a', getter); return getter; }; // Object.prototype.hasOwnProperty.call __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; // __webpack_public_path__ __webpack_require__.p = ""; // Load entry module and return exports return __webpack_require__(__webpack_require__.s = "./build/index.js"); ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.Socket = exports.io = exports.Manager = exports.protocol = void 0; const url_1 = require("./url"); const manager_1 = require("./manager"); const socket_1 = require("./socket"); Object.defineProperty(exports, "Socket", { enumerable: true, get: function () { return socket_1.Socket; } }); const debug = require("debug")("socket.io-client"); /** * Module exports. */ module.exports = exports = lookup; /** * Managers cache. */ const cache = (exports.managers = {}); function lookup(uri, opts) { if (typeof uri === "object") { opts = uri; uri = undefined; } opts = opts || {}; const parsed = url_1.url(uri, opts.path); const source = parsed.source; const id = parsed.id; const path = parsed.path; const sameNamespace = cache[id] && path in cache[id]["nsps"]; const newConnection = opts.forceNew || opts["force new connection"] || false === opts.multiplex || sameNamespace; let io; if (newConnection) { debug("ignoring socket cache for %s", source); io = new manager_1.Manager(source, opts); } else { if (!cache[id]) { debug("new io instance for %s", source); cache[id] = new manager_1.Manager(source, opts); } io = cache[id]; } if (parsed.query && !opts.query) { opts.query = parsed.queryKey; } return io.socket(parsed.path, opts); } exports.io = lookup; /** * Protocol version. * * @public */ var socket_io_parser_1 = require("socket.io-parser"); Object.defineProperty(exports, "protocol", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } }); /** * `connect`. * * @param {String} uri * @public */ exports.connect = lookup; /** * Expose constructors for standalone build. * * @public */ var manager_2 = require("./manager"); Object.defineProperty(exports, "Manager", { enumerable: true, get: function () { return manager_2.Manager; } }); ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.Manager = void 0; const eio = require("engine.io-client"); const socket_1 = require("./socket"); const Emitter = require("component-emitter"); const parser = require("socket.io-parser"); const on_1 = require("./on"); const Backoff = require("backo2"); const debug = require("debug")("socket.io-client:manager"); class Manager extends Emitter { constructor(uri, opts) { super(); this.nsps = {}; this.subs = []; if (uri && "object" === typeof uri) { opts = uri; uri = undefined; } opts = opts || {}; opts.path = opts.path || "/socket.io"; this.opts = opts; this.reconnection(opts.reconnection !== false); this.reconnectionAttempts(opts.reconnectionAttempts || Infinity); this.reconnectionDelay(opts.reconnectionDelay || 1000); this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000); this.randomizationFactor(opts.randomizationFactor || 0.5); this.backoff = new Backoff({ min: this.reconnectionDelay(), max: this.reconnectionDelayMax(), jitter: this.randomizationFactor(), }); this.timeout(null == opts.timeout ? 20000 : opts.timeout); this._readyState = "closed"; this.uri = uri; const _parser = opts.parser || parser; this.encoder = new _parser.Encoder(); this.decoder = new _parser.Decoder(); this._autoConnect = opts.autoConnect !== false; if (this._autoConnect) this.open(); } reconnection(v) { if (!arguments.length) return this._reconnection; this._reconnection = !!v; return this; } reconnectionAttempts(v) { if (v === undefined) return this._reconnectionAttempts; this._reconnectionAttempts = v; return this; } reconnectionDelay(v) { var _a; if (v === undefined) return this._reconnectionDelay; this._reconnectionDelay = v; (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v); return this; } randomizationFactor(v) { var _a; if (v === undefined) return this._randomizationFactor; this._randomizationFactor = v; (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v); return this; } reconnectionDelayMax(v) { var _a; if (v === undefined) return this._reconnectionDelayMax; this._reconnectionDelayMax = v; (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v); return this; } timeout(v) { if (!arguments.length) return this._timeout; this._timeout = v; return this; } /** * Starts trying to reconnect if reconnection is enabled and we have not * started reconnecting yet * * @private */ maybeReconnectOnOpen() { // Only try to reconnect if it's the first time we're connecting if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) { // keeps reconnection from firing twice for the same reconnection loop this.reconnect(); } } /** * Sets the current transport `socket`. * * @param {Function} fn - optional, callback * @return self * @public */ open(fn) { debug("readyState %s", this._readyState); if (~this._readyState.indexOf("open")) return this; debug("opening %s", this.uri); this.engine = eio(this.uri, this.opts); const socket = this.engine; const self = this; this._readyState = "opening"; this.skipReconnect = false; // emit `open` const openSubDestroy = on_1.on(socket, "open", function () { self.onopen(); fn && fn(); }); // emit `error` const errorSub = on_1.on(socket, "error", (err) => { debug("error"); self.cleanup(); self._readyState = "closed"; super.emit("error", err); if (fn) { fn(err); } else { // Only do this if there is no fn to handle the error self.maybeReconnectOnOpen(); } }); if (false !== this._timeout) { const timeout = this._timeout; debug("connect attempt will timeout after %d", timeout); if (timeout === 0) { openSubDestroy(); // prevents a race condition with the 'open' event } // set timer const timer = setTimeout(() => { debug("connect attempt timed out after %d", timeout); openSubDestroy(); socket.close(); socket.emit("error", new Error("timeout")); }, timeout); this.subs.push(function subDestroy() { clearTimeout(timer); }); } this.subs.push(openSubDestroy); this.subs.push(errorSub); return this; } /** * Alias for open() * * @return self * @public */ connect(fn) { return this.open(fn); } /** * Called upon transport open. * * @private */ onopen() { debug("open"); // clear old subs this.cleanup(); // mark as open this._readyState = "open"; super.emit("open"); // add new subs const socket = this.engine; this.subs.push(on_1.on(socket, "ping", this.onping.bind(this)), on_1.on(socket, "data", this.ondata.bind(this)), on_1.on(socket, "error", this.onerror.bind(this)), on_1.on(socket, "close", this.onclose.bind(this)), on_1.on(this.decoder, "decoded", this.ondecoded.bind(this))); } /** * Called upon a ping. * * @private */ onping() { super.emit("ping"); } /** * Called with data. * * @private */ ondata(data) { this.decoder.add(data); } /** * Called when parser fully decodes a packet. * * @private */ ondecoded(packet) { super.emit("packet", packet); } /** * Called upon socket error. * * @private */ onerror(err) { debug("error", err); super.emit("error", err); } /** * Creates a new socket for the given `nsp`. * * @return {Socket} * @public */ socket(nsp, opts) { let socket = this.nsps[nsp]; if (!socket) { socket = new socket_1.Socket(this, nsp, opts); this.nsps[nsp] = socket; } return socket; } /** * Called upon a socket close. * * @param socket * @private */ _destroy(socket) { const nsps = Object.keys(this.nsps); for (const nsp of nsps) { const socket = this.nsps[nsp]; if (socket.active) { debug("socket %s is still active, skipping close", nsp); return; } } this._close(); } /** * Writes a packet. * * @param packet * @private */ _packet(packet) { debug("writing packet %j", packet); const encodedPackets = this.encoder.encode(packet); for (let i = 0; i < encodedPackets.length; i++) { this.engine.write(encodedPackets[i], packet.options); } } /** * Clean up transport subscriptions and packet buffer. * * @private */ cleanup() { debug("cleanup"); this.subs.forEach((subDestroy) => subDestroy()); this.subs.length = 0; this.decoder.destroy(); } /** * Close the current socket. * * @private */ _close() { debug("disconnect"); this.skipReconnect = true; this._reconnecting = false; if ("opening" === this._readyState) { // `onclose` will not fire because // an open event never happened this.cleanup(); } this.backoff.reset(); this._readyState = "closed"; if (this.engine) this.engine.close(); } /** * Alias for close() * * @private */ disconnect() { return this._close(); } /** * Called upon engine close. * * @private */ onclose(reason) { debug("onclose"); this.cleanup(); this.backoff.reset(); this._readyState = "closed"; super.emit("close", reason); if (this._reconnection && !this.skipReconnect) { this.reconnect(); } } /** * Attempt a reconnection. * * @private */ reconnect() { if (this._reconnecting || this.skipReconnect) return this; const self = this; if (this.backoff.attempts >= this._reconnectionAttempts) { debug("reconnect failed"); this.backoff.reset(); super.emit("reconnect_failed"); this._reconnecting = false; } else { const delay = this.backoff.duration(); debug("will wait %dms before reconnect attempt", delay); this._reconnecting = true; const timer = setTimeout(() => { if (self.skipReconnect) return; debug("attempting reconnect"); super.emit("reconnect_attempt", self.backoff.attempts); // check again for the case socket closed in above events if (self.skipReconnect) return; self.open((err) => { if (err) { debug("reconnect attempt error"); self._reconnecting = false; self.reconnect(); super.emit("reconnect_error", err); } else { debug("reconnect success"); self.onreconnect(); } }); }, delay); this.subs.push(function subDestroy() { clearTimeout(timer); }); } } /** * Called upon successful reconnect. * * @private */ onreconnect() { const attempt = this.backoff.attempts; this._reconnecting = false; this.backoff.reset(); super.emit("reconnect", attempt); } } exports.Manager = Manager; ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.on = void 0; function on(obj, ev, fn) { obj.on(ev, fn); return function subDestroy() { obj.off(ev, fn); }; } exports.on = on; ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.Socket = void 0; const socket_io_parser_1 = require("socket.io-parser"); const Emitter = require("component-emitter"); const on_1 = require("./on"); const debug = require("debug")("socket.io-client:socket"); /** * Internal events. * These events can't be emitted by the user. */ const RESERVED_EVENTS = Object.freeze({ connect: 1, connect_error: 1, disconnect: 1, disconnecting: 1, // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener newListener: 1, removeListener: 1, }); class Socket extends Emitter { /** * `Socket` constructor. * * @public */ constructor(io, nsp, opts) { super(); this.receiveBuffer = []; this.sendBuffer = []; this.ids = 0; this.acks = {}; this.flags = {}; this.io = io; this.nsp = nsp; this.ids = 0; this.acks = {}; this.receiveBuffer = []; this.sendBuffer = []; this.connected = false; this.disconnected = true; this.flags = {}; if (opts && opts.auth) { this.auth = opts.auth; } if (this.io._autoConnect) this.open(); } /** * Subscribe to open, close and packet events * * @private */ subEvents() { if (this.subs) return; const io = this.io; this.subs = [ on_1.on(io, "open", this.onopen.bind(this)), on_1.on(io, "packet", this.onpacket.bind(this)), on_1.on(io, "error", this.onerror.bind(this)), on_1.on(io, "close", this.onclose.bind(this)), ]; } /** * Whether the Socket will try to reconnect when its Manager connects or reconnects */ get active() { return !!this.subs; } /** * "Opens" the socket. * * @public */ connect() { if (this.connected) return this; this.subEvents(); if (!this.io["_reconnecting"]) this.io.open(); // ensure open if ("open" === this.io._readyState) this.onopen(); return this; } /** * Alias for connect() */ open() { return this.connect(); } /** * Sends a `message` event. * * @return self * @public */ send(...args) { args.unshift("message"); this.emit.apply(this, args); return this; } /** * Override `emit`. * If the event is in `events`, it's emitted normally. * * @param ev - event name * @return self * @public */ emit(ev, ...args) { if (RESERVED_EVENTS.hasOwnProperty(ev)) { throw new Error('"' + ev + '" is a reserved event name'); } args.unshift(ev); const packet = { type: socket_io_parser_1.PacketType.EVENT, data: args, }; packet.options = {}; packet.options.compress = this.flags.compress !== false; // event ack callback if ("function" === typeof args[args.length - 1]) { debug("emitting packet with ack id %d", this.ids); this.acks[this.ids] = args.pop(); packet.id = this.ids++; } const isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable; const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected); if (discardPacket) { debug("discard packet as the transport is not currently writable"); } else if (this.connected) { this.packet(packet); } else { this.sendBuffer.push(packet); } this.flags = {}; return this; } /** * Sends a packet. * * @param packet * @private */ packet(packet) { packet.nsp = this.nsp; this.io._packet(packet); } /** * Called upon engine `open`. * * @private */ onopen() { debug("transport is open - connecting"); if (typeof this.auth == "function") { this.auth((data) => { this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data }); }); } else { this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth }); } } /** * Called upon engine or manager `error`. * * @param err * @private */ onerror(err) { if (!this.connected) { super.emit("connect_error", err); } } /** * Called upon engine `close`. * * @param reason * @private */ onclose(reason) { debug("close (%s)", reason); this.connected = false; this.disconnected = true; delete this.id; super.emit("disconnect", reason); } /** * Called with socket packet. * * @param packet * @private */ onpacket(packet) { const sameNamespace = packet.nsp === this.nsp; if (!sameNamespace) return; switch (packet.type) { case socket_io_parser_1.PacketType.CONNECT: if (packet.data && packet.data.sid) { const id = packet.data.sid; this.onconnect(id); } else { super.emit("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)")); } break; case socket_io_parser_1.PacketType.EVENT: this.onevent(packet); break; case socket_io_parser_1.PacketType.BINARY_EVENT: this.onevent(packet); break; case socket_io_parser_1.PacketType.ACK: this.onack(packet); break; case socket_io_parser_1.PacketType.BINARY_ACK: this.onack(packet); break; case socket_io_parser_1.PacketType.DISCONNECT: this.ondisconnect(); break; case socket_io_parser_1.PacketType.CONNECT_ERROR: const err = new Error(packet.data.message); // @ts-ignore err.data = packet.data.data; super.emit("connect_error", err); break; } } /** * Called upon a server event. * * @param packet * @private */ onevent(packet) { const args = packet.data || []; debug("emitting event %j", args); if (null != packet.id) { debug("attaching ack callback to event"); args.push(this.ack(packet.id)); } if (this.connected) { this.emitEvent(args); } else { this.receiveBuffer.push(Object.freeze(args)); } } emitEvent(args) { if (this._anyListeners && this._anyListeners.length) { const listeners = this._anyListeners.slice(); for (const listener of listeners) { listener.apply(this, args); } } super.emit.apply(this, args); } /** * Produces an ack callback to emit with an event. * * @private */ ack(id) { const self = this; let sent = false; return function (...args) { // prevent double callbacks if (sent) return; sent = true; debug("sending ack %j", args); self.packet({ type: socket_io_parser_1.PacketType.ACK, id: id, data: args, }); }; } /** * Called upon a server acknowlegement. * * @param packet * @private */ onack(packet) { const ack = this.acks[packet.id]; if ("function" === typeof ack) { debug("calling ack %s with %j", packet.id, packet.data); ack.apply(this, packet.data); delete this.acks[packet.id]; } else { debug("bad ack %s", packet.id); } } /** * Called upon server connect. * * @private */ onconnect(id) { debug("socket connected with id %s", id); this.id = id; this.connected = true; this.disconnected = false; super.emit("connect"); this.emitBuffered(); } /** * Emit buffered events (received and emitted). * * @private */ emitBuffered() { this.receiveBuffer.forEach((args) => this.emitEvent(args)); this.receiveBuffer = []; this.sendBuffer.forEach((packet) => this.packet(packet)); this.sendBuffer = []; } /** * Called upon server disconnect. * * @private */ ondisconnect() { debug("server disconnect (%s)", this.nsp); this.destroy(); this.onclose("io server disconnect"); } /** * Called upon forced client/server side disconnections, * this method ensures the manager stops tracking us and * that reconnections don't get triggered for this. * * @private */ destroy() { if (this.subs) { // clean subscriptions to avoid reconnections this.subs.forEach((subDestroy) => subDestroy()); this.subs = undefined; } this.io["_destroy"](this); } /** * Disconnects the socket manually. * * @return self * @public */ disconnect() { if (this.connected) { debug("performing disconnect (%s)", this.nsp); this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT }); } // remove socket from pool this.destroy(); if (this.connected) { // fire events this.onclose("io client disconnect"); } return this; } /** * Alias for disconnect() * * @return self * @public */ close() { return this.disconnect(); } /** * Sets the compress flag. * * @param compress - if `true`, compresses the sending data * @return self * @public */ compress(compress) { this.flags.compress = compress; return this; } /** * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not * ready to send messages. * * @returns self * @public */ get volatile() { this.flags.volatile = true; return this; } /** * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the * callback. * * @param listener * @public */ onAny(listener) { this._anyListeners = this._anyListeners || []; this._anyListeners.push(listener); return this; } /** * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the * callback. The listener is added to the beginning of the listeners array. * * @param listener * @public */ prependAny(listener) { this._anyListeners = this._anyListeners || []; this._anyListeners.unshift(listener); return this; } /** * Removes the listener that will be fired when any event is emitted. * * @param listener * @public */ offAny(listener) { if (!this._anyListeners) { return this; } if (listener) { const listeners = this._anyListeners; for (let i = 0; i < listeners.length; i++) { if (listener === listeners[i]) { listeners.splice(i, 1); return this; } } } else { this._anyListeners = []; } return this; } /** * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated, * e.g. to remove listeners. * * @public */ listenersAny() { return this._anyListeners || []; } } exports.Socket = Socket; ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.url = void 0; const parseuri = require("parseuri"); const debug = require("debug")("socket.io-client:url"); /** * URL parser. * * @param uri - url * @param path - the request path of the connection * @param loc - An object meant to mimic window.location. * Defaults to window.location. * @public */ function url(uri, path = "", loc) { let obj = uri; // default to window.location loc = loc || (typeof location !== "undefined" && location); if (null == uri) uri = loc.protocol + "//" + loc.host; // relative path support if (typeof uri === "string") { if ("/" === uri.charAt(0)) { if ("/" === uri.charAt(1)) { uri = loc.protocol + uri; } else { uri = loc.host + uri; } } if (!/^(https?|wss?):\/\//.test(uri)) { debug("protocol-less url %s", uri); if ("undefined" !== typeof loc) { uri = loc.protocol + "//" + uri; } else { uri = "https://" + uri; } } // parse debug("parse %s", uri); obj = parseuri(uri); } // make sure we treat `localhost:80` and `localhost` equally if (!obj.port) { if (/^(http|ws)$/.test(obj.protocol)) { obj.port = "80"; } else if (/^(http|ws)s$/.test(obj.protocol)) { obj.port = "443"; } } obj.path = obj.path || "/"; const ipv6 = obj.host.indexOf(":") !== -1; const host = ipv6 ? "[" + obj.host + "]" : obj.host; // define unique id obj.id = obj.protocol + "://" + host + ":" + obj.port + path; // define href obj.href = obj.protocol + "://" + host + (loc && loc.port === obj.port ? "" : ":" + obj.port); return obj; } exports.url = url; ",
    " /** * Expose `Backoff`. */ module.exports = Backoff; /** * Initialize backoff timer with `opts`. * * - `min` initial timeout in milliseconds [100] * - `max` max timeout [10000] * - `jitter` [0] * - `factor` [2] * * @param {Object} opts * @api public */ function Backoff(opts) { opts = opts || {}; this.ms = opts.min || 100; this.max = opts.max || 10000; this.factor = opts.factor || 2; this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0; this.attempts = 0; } /** * Return the backoff duration. * * @return {Number} * @api public */ Backoff.prototype.duration = function(){ var ms = this.ms * Math.pow(this.factor, this.attempts++); if (this.jitter) { var rand = Math.random(); var deviation = Math.floor(rand * this.jitter * ms); ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation; } return Math.min(ms, this.max) | 0; }; /** * Reset the number of attempts. * * @api public */ Backoff.prototype.reset = function(){ this.attempts = 0; }; /** * Set the minimum duration * * @api public */ Backoff.prototype.setMin = function(min){ this.ms = min; }; /** * Set the maximum duration * * @api public */ Backoff.prototype.setMax = function(max){ this.max = max; }; /** * Set the jitter * * @api public */ Backoff.prototype.setJitter = function(jitter){ this.jitter = jitter; }; ",
    " /** * Expose `Emitter`. */ if (typeof module !== 'undefined') { module.exports = Emitter; } /** * Initialize a new `Emitter`. * * @api public */ function Emitter(obj) { if (obj) return mixin(obj); }; /** * Mixin the emitter properties. * * @param {Object} obj * @return {Object} * @api private */ function mixin(obj) { for (var key in Emitter.prototype) { obj[key] = Emitter.prototype[key]; } return obj; } /** * Listen on the given `event` with `fn`. * * @param {String} event * @param {Function} fn * @return {Emitter} * @api public */ Emitter.prototype.on = Emitter.prototype.addEventListener = function(event, fn){ this._callbacks = this._callbacks || {}; (this._callbacks['$' + event] = this._callbacks['$' + event] || []) .push(fn); return this; }; /** * Adds an `event` listener that will be invoked a single * time then automatically removed. * * @param {String} event * @param {Function} fn * @return {Emitter} * @api public */ Emitter.prototype.once = function(event, fn){ function on() { this.off(event, on); fn.apply(this, arguments); } on.fn = fn; this.on(event, on); return this; }; /** * Remove the given callback for `event` or all * registered callbacks. * * @param {String} event * @param {Function} fn * @return {Emitter} * @api public */ Emitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function(event, fn){ this._callbacks = this._callbacks || {}; // all if (0 == arguments.length) { this._callbacks = {}; return this; } // specific event var callbacks = this._callbacks['$' + event]; if (!callbacks) return this; // remove all handlers if (1 == arguments.length) { delete this._callbacks['$' + event]; return this; } // remove specific handler var cb; for (var i = 0; i < callbacks.length; i++) { cb = callbacks[i]; if (cb === fn || cb.fn === fn) { callbacks.splice(i, 1); break; } } // Remove event specific arrays for event types that no // one is subscribed for to avoid memory leak. if (callbacks.length === 0) { delete this._callbacks['$' + event]; } return this; }; /** * Emit `event` with the given args. * * @param {String} event * @param {Mixed} ... * @return {Emitter} */ Emitter.prototype.emit = function(event){ this._callbacks = this._callbacks || {}; var args = new Array(arguments.length - 1) , callbacks = this._callbacks['$' + event]; for (var i = 1; i < arguments.length; i++) { args[i - 1] = arguments[i]; } if (callbacks) { callbacks = callbacks.slice(0); for (var i = 0, len = callbacks.length; i < len; ++i) { callbacks[i].apply(this, args); } } return this; }; /** * Return array of callbacks for `event`. * * @param {String} event * @return {Array} * @api public */ Emitter.prototype.listeners = function(event){ this._callbacks = this._callbacks || {}; return this._callbacks['$' + event] || []; }; /** * Check if this emitter has `event` handlers. * * @param {String} event * @return {Boolean} * @api public */ Emitter.prototype.hasListeners = function(event){ return !! this.listeners(event).length; }; ",
    "/* eslint-env browser */ /** * This is the web browser implementation of `debug()`. */ exports.formatArgs = formatArgs; exports.save = save; exports.load = load; exports.useColors = useColors; exports.storage = localstorage(); exports.destroy = (() => { let warned = false; return () => { if (!warned) { warned = true; console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'); } }; })(); /** * Colors. */ exports.colors = [ '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33' ]; /** * Currently only WebKit-based Web Inspectors, Firefox >= v31, * and the Firebug extension (any Firefox version) are known * to support "%c" CSS customizations. * * TODO: add a `localStorage` variable to explicitly enable/disable colors */ // eslint-disable-next-line complexity function useColors() { // NB: In an Electron preload script, document will be defined but not fully // initialized. Since we know we're in Chrome, we'll just detect this case // explicitly if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) { return true; } // Internet Explorer and Edge do not support colors. if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) { return false; } // Is webkit? http://stackoverflow.com/a/16459606/376773 // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632 return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) || // Is firebug? http://stackoverflow.com/a/398120/376773 (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) || // Is firefox >= v31? // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) || // Double check webkit in userAgent just in case we are in a worker (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)); } /** * Colorize log arguments if enabled. * * @api public */ function formatArgs(args) { args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff); if (!this.useColors) { return; } const c = 'color: ' + this.color; args.splice(1, 0, c, 'color: inherit'); // The final "%c" is somewhat tricky, because there could be other // arguments passed either before or after the %c, so we need to // figure out the correct index to insert the CSS into let index = 0; let lastC = 0; args[0].replace(/%[a-zA-Z%]/g, match => { if (match === '%%') { return; } index++; if (match === '%c') { // We only are interested in the *last* %c // (the user may have provided their own) lastC = index; } }); args.splice(lastC, 0, c); } /** * Invokes `console.debug()` when available. * No-op when `console.debug` is not a "function". * If `console.debug` is not available, falls back * to `console.log`. * * @api public */ exports.log = console.debug || console.log || (() => {}); /** * Save `namespaces`. * * @param {String} namespaces * @api private */ function save(namespaces) { try { if (namespaces) { exports.storage.setItem('debug', namespaces); } else { exports.storage.removeItem('debug'); } } catch (error) { // Swallow // XXX (@Qix-) should we be logging these? } } /** * Load `namespaces`. * * @return {String} returns the previously persisted debug modes * @api private */ function load() { let r; try { r = exports.storage.getItem('debug'); } catch (error) { // Swallow // XXX (@Qix-) should we be logging these? } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG if (!r && typeof process !== 'undefined' && 'env' in process) { r = process.env.DEBUG; } return r; } /** * Localstorage attempts to return the localstorage. * * This is necessary because safari throws * when a user disables cookies/localstorage * and you attempt to access it. * * @return {LocalStorage} * @api private */ function localstorage() { try { // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context // The Browser also has localStorage in the global context. return localStorage; } catch (error) { // Swallow // XXX (@Qix-) should we be logging these? } } module.exports = require('./common')(exports); const {formatters} = module.exports; /** * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default. */ formatters.j = function (v) { try { return JSON.stringify(v); } catch (error) { return '[UnexpectedJSONParseError]: ' + error.message; } }; ",
    " /** * This is the common logic for both the Node.js and web browser * implementations of `debug()`. */ function setup(env) { createDebug.debug = createDebug; createDebug.default = createDebug; createDebug.coerce = coerce; createDebug.disable = disable; createDebug.enable = enable; createDebug.enabled = enabled; createDebug.humanize = require('ms'); createDebug.destroy = destroy; Object.keys(env).forEach(key => { createDebug[key] = env[key]; }); /** * The currently active debug mode names, and names to skip. */ createDebug.names = []; createDebug.skips = []; /** * Map of special "%n" handling functions, for the debug "format" argument. * * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N". */ createDebug.formatters = {}; /** * Selects a color for a debug namespace * @param {String} namespace The namespace string for the for the debug instance to be colored * @return {Number|String} An ANSI color code for the given namespace * @api private */ function selectColor(namespace) { let hash = 0; for (let i = 0; i < namespace.length; i++) { hash = ((hash << 5) - hash) + namespace.charCodeAt(i); hash |= 0; // Convert to 32bit integer } return createDebug.colors[Math.abs(hash) % createDebug.colors.length]; } createDebug.selectColor = selectColor; /** * Create a debugger with the given `namespace`. * * @param {String} namespace * @return {Function} * @api public */ function createDebug(namespace) { let prevTime; let enableOverride = null; function debug(...args) { // Disabled? if (!debug.enabled) { return; } const self = debug; // Set `diff` timestamp const curr = Number(new Date()); const ms = curr - (prevTime || curr); self.diff = ms; self.prev = prevTime; self.curr = curr; prevTime = curr; args[0] = createDebug.coerce(args[0]); if (typeof args[0] !== 'string') { // Anything else let's inspect with %O args.unshift('%O'); } // Apply any `formatters` transformations let index = 0; args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => { // If we encounter an escaped % then don't increase the array index if (match === '%%') { return '%'; } index++; const formatter = createDebug.formatters[format]; if (typeof formatter === 'function') { const val = args[index]; match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format` args.splice(index, 1); index--; } return match; }); // Apply env-specific formatting (colors, etc.) createDebug.formatArgs.call(self, args); const logFn = self.log || createDebug.log; logFn.apply(self, args); } debug.namespace = namespace; debug.useColors = createDebug.useColors(); debug.color = createDebug.selectColor(namespace); debug.extend = extend; debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release. Object.defineProperty(debug, 'enabled', { enumerable: true, configurable: false, get: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride, set: v => { enableOverride = v; } }); // Env-specific initialization logic for debug instances if (typeof createDebug.init === 'function') { createDebug.init(debug); } return debug; } function extend(namespace, delimiter) { const newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace); newDebug.log = this.log; return newDebug; } /** * Enables a debug mode by namespaces. This can include modes * separated by a colon and wildcards. * * @param {String} namespaces * @api public */ function enable(namespaces) { createDebug.save(namespaces); createDebug.names = []; createDebug.skips = []; let i; const split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/); const len = split.length; for (i = 0; i < len; i++) { if (!split[i]) { // ignore empty strings continue; } namespaces = split[i].replace(/\*/g, '.*?'); if (namespaces[0] === '-') { createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$')); } else { createDebug.names.push(new RegExp('^' + namespaces + '$')); } } } /** * Disable debug output. * * @return {String} namespaces * @api public */ function disable() { const namespaces = [ ...createDebug.names.map(toNamespace), ...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace) ].join(','); createDebug.enable(''); return namespaces; } /** * Returns true if the given mode name is enabled, false otherwise. * * @param {String} name * @return {Boolean} * @api public */ function enabled(name) { if (name[name.length - 1] === '*') { return true; } let i; let len; for (i = 0, len = createDebug.skips.length; i < len; i++) { if (createDebug.skips[i].test(name)) { return false; } } for (i = 0, len = createDebug.names.length; i < len; i++) { if (createDebug.names[i].test(name)) { return true; } } return false; } /** * Convert regexp to namespace * * @param {RegExp} regxep * @return {String} namespace * @api private */ function toNamespace(regexp) { return regexp.toString() .substring(2, regexp.toString().length - 2) .replace(/\.\*\?$/, '*'); } /** * Coerce `val`. * * @param {Mixed} val * @return {Mixed} * @api private */ function coerce(val) { if (val instanceof Error) { return val.stack || val.message; } return val; } /** * XXX DO NOT USE. This is a temporary stub function. * XXX It WILL be removed in the next major release. */ function destroy() { console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'); } createDebug.enable(createDebug.load()); return createDebug; } module.exports = setup; ",
    "module.exports = (() => { if (typeof self !== "undefined") { return self; } else if (typeof window !== "undefined") { return window; } else { return Function("return this")(); } })(); ",
    "const Socket = require("./socket"); module.exports = (uri, opts) => new Socket(uri, opts); /** * Expose deps for legacy compatibility * and standalone browser access. */ module.exports.Socket = Socket; module.exports.protocol = Socket.protocol; // this is an int module.exports.Transport = require("./transport"); module.exports.transports = require("./transports/index"); module.exports.parser = require("engine.io-parser"); ",
    "const transports = require("./transports/index"); const Emitter = require("component-emitter"); const debug = require("debug")("engine.io-client:socket"); const parser = require("engine.io-parser"); const parseuri = require("parseuri"); const parseqs = require("parseqs"); class Socket extends Emitter { /** * Socket constructor. * * @param {String|Object} uri or options * @param {Object} options * @api public */ constructor(uri, opts = {}) { super(); if (uri && "object" === typeof uri) { opts = uri; uri = null; } if (uri) { uri = parseuri(uri); opts.hostname = uri.host; opts.secure = uri.protocol === "https" || uri.protocol === "wss"; opts.port = uri.port; if (uri.query) opts.query = uri.query; } else if (opts.host) { opts.hostname = parseuri(opts.host).host; } this.secure = null != opts.secure ? opts.secure : typeof location !== "undefined" && "https:" === location.protocol; if (opts.hostname && !opts.port) { // if no port is specified manually, use the protocol default opts.port = this.secure ? "443" : "80"; } this.hostname = opts.hostname || (typeof location !== "undefined" ? location.hostname : "localhost"); this.port = opts.port || (typeof location !== "undefined" && location.port ? location.port : this.secure ? 443 : 80); this.transports = opts.transports || ["polling", "websocket"]; this.readyState = ""; this.writeBuffer = []; this.prevBufferLen = 0; this.opts = Object.assign( { path: "/engine.io", agent: false, withCredentials: false, upgrade: true, jsonp: true, timestampParam: "t", rememberUpgrade: false, rejectUnauthorized: true, perMessageDeflate: { threshold: 1024 }, transportOptions: {} }, opts ); this.opts.path = this.opts.path.replace(/\/$/, "") + "/"; if (typeof this.opts.query === "string") { this.opts.query = parseqs.decode(this.opts.query); } // set on handshake this.id = null; this.upgrades = null; this.pingInterval = null; this.pingTimeout = null; // set on heartbeat this.pingTimeoutTimer = null; this.open(); } /** * Creates transport of the given type. * * @param {String} transport name * @return {Transport} * @api private */ createTransport(name) { debug('creating transport "%s"', name); const query = clone(this.opts.query); // append engine.io protocol identifier query.EIO = parser.protocol; // transport name query.transport = name; // session id if we already have one if (this.id) query.sid = this.id; const opts = Object.assign( {}, this.opts.transportOptions[name], this.opts, { query, socket: this, hostname: this.hostname, secure: this.secure, port: this.port } ); debug("options: %j", opts); return new transports[name](opts); } /** * Initializes transport to use and starts probe. * * @api private */ open() { let transport; if ( this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1 ) { transport = "websocket"; } else if (0 === this.transports.length) { // Emit error on next tick so it can be listened to const self = this; setTimeout(function() { self.emit("error", "No transports available"); }, 0); return; } else { transport = this.transports[0]; } this.readyState = "opening"; // Retry with the next transport if the transport is disabled (jsonp: false) try { transport = this.createTransport(transport); } catch (e) { debug("error while creating transport: %s", e); this.transports.shift(); this.open(); return; } transport.open(); this.setTransport(transport); } /** * Sets the current transport. Disables the existing one (if any). * * @api private */ setTransport(transport) { debug("setting transport %s", transport.name); const self = this; if (this.transport) { debug("clearing existing transport %s", this.transport.name); this.transport.removeAllListeners(); } // set up transport this.transport = transport; // set up transport listeners transport .on("drain", function() { self.onDrain(); }) .on("packet", function(packet) { self.onPacket(packet); }) .on("error", function(e) { self.onError(e); }) .on("close", function() { self.onClose("transport close"); }); } /** * Probes a transport. * * @param {String} transport name * @api private */ probe(name) { debug('probing transport "%s"', name); let transport = this.createTransport(name, { probe: 1 }); let failed = false; const self = this; Socket.priorWebsocketSuccess = false; function onTransportOpen() { if (self.onlyBinaryUpgrades) { const upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary; failed = failed || upgradeLosesBinary; } if (failed) return; debug('probe transport "%s" opened', name); transport.send([{ type: "ping", data: "probe" }]); transport.once("packet", function(msg) { if (failed) return; if ("pong" === msg.type && "probe" === msg.data) { debug('probe transport "%s" pong', name); self.upgrading = true; self.emit("upgrading", transport); if (!transport) return; Socket.priorWebsocketSuccess = "websocket" === transport.name; debug('pausing current transport "%s"', self.transport.name); self.transport.pause(function() { if (failed) return; if ("closed" === self.readyState) return; debug("changing transport and sending upgrade packet"); cleanup(); self.setTransport(transport); transport.send([{ type: "upgrade" }]); self.emit("upgrade", transport); transport = null; self.upgrading = false; self.flush(); }); } else { debug('probe transport "%s" failed', name); const err = new Error("probe error"); err.transport = transport.name; self.emit("upgradeError", err); } }); } function freezeTransport() { if (failed) return; // Any callback called by transport should be ignored since now failed = true; cleanup(); transport.close(); transport = null; } // Handle any error that happens while probing function onerror(err) { const error = new Error("probe error: " + err); error.transport = transport.name; freezeTransport(); debug('probe transport "%s" failed because of error: %s', name, err); self.emit("upgradeError", error); } function onTransportClose() { onerror("transport closed"); } // When the socket is closed while we're probing function onclose() { onerror("socket closed"); } // When the socket is upgraded while we're probing function onupgrade(to) { if (transport && to.name !== transport.name) { debug('"%s" works - aborting "%s"', to.name, transport.name); freezeTransport(); } } // Remove all listeners on the transport and on self function cleanup() { transport.removeListener("open", onTransportOpen); transport.removeListener("error", onerror); transport.removeListener("close", onTransportClose); self.removeListener("close", onclose); self.removeListener("upgrading", onupgrade); } transport.once("open", onTransportOpen); transport.once("error", onerror); transport.once("close", onTransportClose); this.once("close", onclose); this.once("upgrading", onupgrade); transport.open(); } /** * Called when connection is deemed open. * * @api public */ onOpen() { debug("socket open"); this.readyState = "open"; Socket.priorWebsocketSuccess = "websocket" === this.transport.name; this.emit("open"); this.flush(); // we check for `readyState` in case an `open` // listener already closed the socket if ( "open" === this.readyState && this.opts.upgrade && this.transport.pause ) { debug("starting upgrade probes"); let i = 0; const l = this.upgrades.length; for (; i < l; i++) { this.probe(this.upgrades[i]); } } } /** * Handles a packet. * * @api private */ onPacket(packet) { if ( "opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState ) { debug('socket receive: type "%s", data "%s"', packet.type, packet.data); this.emit("packet", packet); // Socket is live - any packet counts this.emit("heartbeat"); switch (packet.type) { case "open": this.onHandshake(JSON.parse(packet.data)); break; case "ping": this.resetPingTimeout(); this.sendPacket("pong"); this.emit("pong"); break; case "error": const err = new Error("server error"); err.code = packet.data; this.onError(err); break; case "message": this.emit("data", packet.data); this.emit("message", packet.data); break; } } else { debug('packet received with socket readyState "%s"', this.readyState); } } /** * Called upon handshake completion. * * @param {Object} handshake obj * @api private */ onHandshake(data) { this.emit("handshake", data); this.id = data.sid; this.transport.query.sid = data.sid; this.upgrades = this.filterUpgrades(data.upgrades); this.pingInterval = data.pingInterval; this.pingTimeout = data.pingTimeout; this.onOpen(); // In case open handler closes socket if ("closed" === this.readyState) return; this.resetPingTimeout(); } /** * Sets and resets ping timeout timer based on server pings. * * @api private */ resetPingTimeout() { clearTimeout(this.pingTimeoutTimer); this.pingTimeoutTimer = setTimeout(() => { this.onClose("ping timeout"); }, this.pingInterval + this.pingTimeout); } /** * Called on `drain` event * * @api private */ onDrain() { this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important // for example, when upgrading, upgrade packet is sent over, // and a nonzero prevBufferLen could cause problems on `drain` this.prevBufferLen = 0; if (0 === this.writeBuffer.length) { this.emit("drain"); } else { this.flush(); } } /** * Flush write buffers. * * @api private */ flush() { if ( "closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length ) { debug("flushing %d packets in socket", this.writeBuffer.length); this.transport.send(this.writeBuffer); // keep track of current length of writeBuffer // splice writeBuffer and callbackBuffer on `drain` this.prevBufferLen = this.writeBuffer.length; this.emit("flush"); } } /** * Sends a message. * * @param {String} message. * @param {Function} callback function. * @param {Object} options. * @return {Socket} for chaining. * @api public */ write(msg, options, fn) { this.sendPacket("message", msg, options, fn); return this; } send(msg, options, fn) { this.sendPacket("message", msg, options, fn); return this; } /** * Sends a packet. * * @param {String} packet type. * @param {String} data. * @param {Object} options. * @param {Function} callback function. * @api private */ sendPacket(type, data, options, fn) { if ("function" === typeof data) { fn = data; data = undefined; } if ("function" === typeof options) { fn = options; options = null; } if ("closing" === this.readyState || "closed" === this.readyState) { return; } options = options || {}; options.compress = false !== options.compress; const packet = { type: type, data: data, options: options }; this.emit("packetCreate", packet); this.writeBuffer.push(packet); if (fn) this.once("flush", fn); this.flush(); } /** * Closes the connection. * * @api private */ close() { const self = this; if ("opening" === this.readyState || "open" === this.readyState) { this.readyState = "closing"; if (this.writeBuffer.length) { this.once("drain", function() { if (this.upgrading) { waitForUpgrade(); } else { close(); } }); } else if (this.upgrading) { waitForUpgrade(); } else { close(); } } function close() { self.onClose("forced close"); debug("socket closing - telling transport to close"); self.transport.close(); } function cleanupAndClose() { self.removeListener("upgrade", cleanupAndClose); self.removeListener("upgradeError", cleanupAndClose); close(); } function waitForUpgrade() { // wait for upgrade to finish since we can't send packets while pausing a transport self.once("upgrade", cleanupAndClose); self.once("upgradeError", cleanupAndClose); } return this; } /** * Called upon transport error * * @api private */ onError(err) { debug("socket error %j", err); Socket.priorWebsocketSuccess = false; this.emit("error", err); this.onClose("transport error", err); } /** * Called upon transport close. * * @api private */ onClose(reason, desc) { if ( "opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState ) { debug('socket close with reason: "%s"', reason); const self = this; // clear timers clearTimeout(this.pingIntervalTimer); clearTimeout(this.pingTimeoutTimer); // stop event from firing again for transport this.transport.removeAllListeners("close"); // ensure transport won't stay open this.transport.close(); // ignore further transport communication this.transport.removeAllListeners(); // set ready state this.readyState = "closed"; // clear session id this.id = null; // emit close event this.emit("close", reason, desc); // clean buffers after, so users can still // grab the buffers on `close` event self.writeBuffer = []; self.prevBufferLen = 0; } } /** * Filters upgrades, returning only those matching client transports. * * @param {Array} server upgrades * @api private * */ filterUpgrades(upgrades) { const filteredUpgrades = []; let i = 0; const j = upgrades.length; for (; i < j; i++) { if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]); } return filteredUpgrades; } } Socket.priorWebsocketSuccess = false; /** * Protocol version. * * @api public */ Socket.protocol = parser.protocol; // this is an int function clone(obj) { const o = {}; for (let i in obj) { if (obj.hasOwnProperty(i)) { o[i] = obj[i]; } } return o; } module.exports = Socket; ",
    "const parser = require("engine.io-parser"); const Emitter = require("component-emitter"); class Transport extends Emitter { /** * Transport abstract constructor. * * @param {Object} options. * @api private */ constructor(opts) { super(); this.opts = opts; this.query = opts.query; this.readyState = ""; this.socket = opts.socket; } /** * Emits an error. * * @param {String} str * @return {Transport} for chaining * @api public */ onError(msg, desc) { const err = new Error(msg); err.type = "TransportError"; err.description = desc; this.emit("error", err); return this; } /** * Opens the transport. * * @api public */ open() { if ("closed" === this.readyState || "" === this.readyState) { this.readyState = "opening"; this.doOpen(); } return this; } /** * Closes the transport. * * @api private */ close() { if ("opening" === this.readyState || "open" === this.readyState) { this.doClose(); this.onClose(); } return this; } /** * Sends multiple packets. * * @param {Array} packets * @api private */ send(packets) { if ("open" === this.readyState) { this.write(packets); } else { throw new Error("Transport not open"); } } /** * Called upon open * * @api private */ onOpen() { this.readyState = "open"; this.writable = true; this.emit("open"); } /** * Called with data. * * @param {String} data * @api private */ onData(data) { const packet = parser.decodePacket(data, this.socket.binaryType); this.onPacket(packet); } /** * Called with a decoded packet. */ onPacket(packet) { this.emit("packet", packet); } /** * Called upon close. * * @api private */ onClose() { this.readyState = "closed"; this.emit("close"); } } module.exports = Transport; ",
    "const XMLHttpRequest = require("xmlhttprequest-ssl"); const XHR = require("./polling-xhr"); const JSONP = require("./polling-jsonp"); const websocket = require("./websocket"); exports.polling = polling; exports.websocket = websocket; /** * Polling transport polymorphic constructor. * Decides on xhr vs jsonp based on feature detection. * * @api private */ function polling(opts) { let xhr; let xd = false; let xs = false; const jsonp = false !== opts.jsonp; if (typeof location !== "undefined") { const isSSL = "https:" === location.protocol; let port = location.port; // some user agents have empty `location.port` if (!port) { port = isSSL ? 443 : 80; } xd = opts.hostname !== location.hostname || port !== opts.port; xs = opts.secure !== isSSL; } opts.xdomain = xd; opts.xscheme = xs; xhr = new XMLHttpRequest(opts); if ("open" in xhr && !opts.forceJSONP) { return new XHR(opts); } else { if (!jsonp) throw new Error("JSONP disabled"); return new JSONP(opts); } } ",
    "const Polling = require("./polling"); const globalThis = require("../globalThis"); const rNewline = /\n/g; const rEscapedNewline = /\\n/g; /** * Global JSONP callbacks. */ let callbacks; /** * Noop. */ function empty() {} class JSONPPolling extends Polling { /** * JSONP Polling constructor. * * @param {Object} opts. * @api public */ constructor(opts) { super(opts); this.query = this.query || {}; // define global callbacks array if not present // we do this here (lazily) to avoid unneeded global pollution if (!callbacks) { // we need to consider multiple engines in the same page callbacks = globalThis.___eio = globalThis.___eio || []; } // callback identifier this.index = callbacks.length; // add callback to jsonp global const self = this; callbacks.push(function(msg) { self.onData(msg); }); // append to query string this.query.j = this.index; // prevent spurious errors from being emitted when the window is unloaded if (typeof addEventListener === "function") { addEventListener( "beforeunload", function() { if (self.script) self.script.onerror = empty; }, false ); } } /** * JSONP only supports binary as base64 encoded strings */ get supportsBinary() { return false; } /** * Closes the socket. * * @api private */ doClose() { if (this.script) { this.script.parentNode.removeChild(this.script); this.script = null; } if (this.form) { this.form.parentNode.removeChild(this.form); this.form = null; this.iframe = null; } super.doClose(); } /** * Starts a poll cycle. * * @api private */ doPoll() { const self = this; const script = document.createElement("script"); if (this.script) { this.script.parentNode.removeChild(this.script); this.script = null; } script.async = true; script.src = this.uri(); script.onerror = function(e) { self.onError("jsonp poll error", e); }; const insertAt = document.getElementsByTagName("script")[0]; if (insertAt) { insertAt.parentNode.insertBefore(script, insertAt); } else { (document.head || document.body).appendChild(script); } this.script = script; const isUAgecko = "undefined" !== typeof navigator && /gecko/i.test(navigator.userAgent); if (isUAgecko) { setTimeout(function() { const iframe = document.createElement("iframe"); document.body.appendChild(iframe); document.body.removeChild(iframe); }, 100); } } /** * Writes with a hidden iframe. * * @param {String} data to send * @param {Function} called upon flush. * @api private */ doWrite(data, fn) { const self = this; let iframe; if (!this.form) { const form = document.createElement("form"); const area = document.createElement("textarea"); const id = (this.iframeId = "eio_iframe_" + this.index); form.className = "socketio"; form.style.position = "absolute"; form.style.top = "-1000px"; form.style.left = "-1000px"; form.target = id; form.method = "POST"; form.setAttribute("accept-charset", "utf-8"); area.name = "d"; form.appendChild(area); document.body.appendChild(form); this.form = form; this.area = area; } this.form.action = this.uri(); function complete() { initIframe(); fn(); } function initIframe() { if (self.iframe) { try { self.form.removeChild(self.iframe); } catch (e) { self.onError("jsonp polling iframe removal error", e); } } try { // ie6 dynamic iframes with target="" support (thanks Chris Lambacher) const html = '<iframe src="javascript:0" name="' + self.iframeId + '">'; iframe = document.createElement(html); } catch (e) { iframe = document.createElement("iframe"); iframe.name = self.iframeId; iframe.src = "javascript:0"; } iframe.id = self.iframeId; self.form.appendChild(iframe); self.iframe = iframe; } initIframe(); // escape \n to prevent it from being converted into \r\n by some UAs // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side data = data.replace(rEscapedNewline, "\\\n"); this.area.value = data.replace(rNewline, "\\n"); try { this.form.submit(); } catch (e) {} if (this.iframe.attachEvent) { this.iframe.onreadystatechange = function() { if (self.iframe.readyState === "complete") { complete(); } }; } else { this.iframe.onload = complete; } } } module.exports = JSONPPolling; ",
    "/* global attachEvent */ const XMLHttpRequest = require("xmlhttprequest-ssl"); const Polling = require("./polling"); const Emitter = require("component-emitter"); const { pick } = require("../util"); const globalThis = require("../globalThis"); const debug = require("debug")("engine.io-client:polling-xhr"); /** * Empty function */ function empty() {} const hasXHR2 = (function() { const xhr = new XMLHttpRequest({ xdomain: false }); return null != xhr.responseType; })(); class XHR extends Polling { /** * XHR Polling constructor. * * @param {Object} opts * @api public */ constructor(opts) { super(opts); if (typeof location !== "undefined") { const isSSL = "https:" === location.protocol; let port = location.port; // some user agents have empty `location.port` if (!port) { port = isSSL ? 443 : 80; } this.xd = (typeof location !== "undefined" && opts.hostname !== location.hostname) || port !== opts.port; this.xs = opts.secure !== isSSL; } /** * XHR supports binary */ const forceBase64 = opts && opts.forceBase64; this.supportsBinary = hasXHR2 && !forceBase64; } /** * Creates a request. * * @param {String} method * @api private */ request(opts = {}) { Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts); return new Request(this.uri(), opts); } /** * Sends data. * * @param {String} data to send. * @param {Function} called upon flush. * @api private */ doWrite(data, fn) { const req = this.request({ method: "POST", data: data }); const self = this; req.on("success", fn); req.on("error", function(err) { self.onError("xhr post error", err); }); } /** * Starts a poll cycle. * * @api private */ doPoll() { debug("xhr poll"); const req = this.request(); const self = this; req.on("data", function(data) { self.onData(data); }); req.on("error", function(err) { self.onError("xhr poll error", err); }); this.pollXhr = req; } } class Request extends Emitter { /** * Request constructor * * @param {Object} options * @api public */ constructor(uri, opts) { super(); this.opts = opts; this.method = opts.method || "GET"; this.uri = uri; this.async = false !== opts.async; this.data = undefined !== opts.data ? opts.data : null; this.create(); } /** * Creates the XHR object and sends the request. * * @api private */ create() { const opts = pick( this.opts, "agent", "enablesXDR", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized" ); opts.xdomain = !!this.opts.xd; opts.xscheme = !!this.opts.xs; const xhr = (this.xhr = new XMLHttpRequest(opts)); const self = this; try { debug("xhr open %s: %s", this.method, this.uri); xhr.open(this.method, this.uri, this.async); try { if (this.opts.extraHeaders) { xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true); for (let i in this.opts.extraHeaders) { if (this.opts.extraHeaders.hasOwnProperty(i)) { xhr.setRequestHeader(i, this.opts.extraHeaders[i]); } } } } catch (e) {} if ("POST" === this.method) { try { xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8"); } catch (e) {} } try { xhr.setRequestHeader("Accept", "*/*"); } catch (e) {} // ie6 check if ("withCredentials" in xhr) { xhr.withCredentials = this.opts.withCredentials; } if (this.opts.requestTimeout) { xhr.timeout = this.opts.requestTimeout; } if (this.hasXDR()) { xhr.onload = function() { self.onLoad(); }; xhr.onerror = function() { self.onError(xhr.responseText); }; } else { xhr.onreadystatechange = function() { if (4 !== xhr.readyState) return; if (200 === xhr.status || 1223 === xhr.status) { self.onLoad(); } else { // make sure the `error` event handler that's user-set // does not throw in the same tick and gets caught here setTimeout(function() { self.onError(typeof xhr.status === "number" ? xhr.status : 0); }, 0); } }; } debug("xhr data %s", this.data); xhr.send(this.data); } catch (e) { // Need to defer since .create() is called directly from the constructor // and thus the 'error' event can only be only bound *after* this exception // occurs. Therefore, also, we cannot throw here at all. setTimeout(function() { self.onError(e); }, 0); return; } if (typeof document !== "undefined") { this.index = Request.requestsCount++; Request.requests[this.index] = this; } } /** * Called upon successful response. * * @api private */ onSuccess() { this.emit("success"); this.cleanup(); } /** * Called if we have data. * * @api private */ onData(data) { this.emit("data", data); this.onSuccess(); } /** * Called upon error. * * @api private */ onError(err) { this.emit("error", err); this.cleanup(true); } /** * Cleans up house. * * @api private */ cleanup(fromError) { if ("undefined" === typeof this.xhr || null === this.xhr) { return; } // xmlhttprequest if (this.hasXDR()) { this.xhr.onload = this.xhr.onerror = empty; } else { this.xhr.onreadystatechange = empty; } if (fromError) { try { this.xhr.abort(); } catch (e) {} } if (typeof document !== "undefined") { delete Request.requests[this.index]; } this.xhr = null; } /** * Called upon load. * * @api private */ onLoad() { const data = this.xhr.responseText; if (data !== null) { this.onData(data); } } /** * Check if it has XDomainRequest. * * @api private */ hasXDR() { return typeof XDomainRequest !== "undefined" && !this.xs && this.enablesXDR; } /** * Aborts the request. * * @api public */ abort() { this.cleanup(); } } /** * Aborts pending requests when unloading the window. This is needed to prevent * memory leaks (e.g. when using IE) and to ensure that no spurious error is * emitted. */ Request.requestsCount = 0; Request.requests = {}; if (typeof document !== "undefined") { if (typeof attachEvent === "function") { attachEvent("onunload", unloadHandler); } else if (typeof addEventListener === "function") { const terminationEvent = "onpagehide" in globalThis ? "pagehide" : "unload"; addEventListener(terminationEvent, unloadHandler, false); } } function unloadHandler() { for (let i in Request.requests) { if (Request.requests.hasOwnProperty(i)) { Request.requests[i].abort(); } } } module.exports = XHR; module.exports.Request = Request; ",
    "const Transport = require("../transport"); const parseqs = require("parseqs"); const parser = require("engine.io-parser"); const yeast = require("yeast"); const debug = require("debug")("engine.io-client:polling"); class Polling extends Transport { /** * Transport name. */ get name() { return "polling"; } /** * Opens the socket (triggers polling). We write a PING message to determine * when the transport is open. * * @api private */ doOpen() { this.poll(); } /** * Pauses polling. * * @param {Function} callback upon buffers are flushed and transport is paused * @api private */ pause(onPause) { const self = this; this.readyState = "pausing"; function pause() { debug("paused"); self.readyState = "paused"; onPause(); } if (this.polling || !this.writable) { let total = 0; if (this.polling) { debug("we are currently polling - waiting to pause"); total++; this.once("pollComplete", function() { debug("pre-pause polling complete"); --total || pause(); }); } if (!this.writable) { debug("we are currently writing - waiting to pause"); total++; this.once("drain", function() { debug("pre-pause writing complete"); --total || pause(); }); } } else { pause(); } } /** * Starts polling cycle. * * @api public */ poll() { debug("polling"); this.polling = true; this.doPoll(); this.emit("poll"); } /** * Overloads onData to detect payloads. * * @api private */ onData(data) { const self = this; debug("polling got data %s", data); const callback = function(packet, index, total) { // if its the first message we consider the transport open if ("opening" === self.readyState && packet.type === "open") { self.onOpen(); } // if its a close packet, we close the ongoing requests if ("close" === packet.type) { self.onClose(); return false; } // otherwise bypass onData and handle the message self.onPacket(packet); }; // decode payload parser.decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing if ("closed" !== this.readyState) { // if we got data we're not polling this.polling = false; this.emit("pollComplete"); if ("open" === this.readyState) { this.poll(); } else { debug('ignoring poll - transport state "%s"', this.readyState); } } } /** * For polling, send a close packet. * * @api private */ doClose() { const self = this; function close() { debug("writing close packet"); self.write([{ type: "close" }]); } if ("open" === this.readyState) { debug("transport open - closing"); close(); } else { // in case we're trying to close while // handshaking is in progress (GH-164) debug("transport not open - deferring close"); this.once("open", close); } } /** * Writes a packets payload. * * @param {Array} data packets * @param {Function} drain callback * @api private */ write(packets) { this.writable = false; parser.encodePayload(packets, data => { this.doWrite(data, () => { this.writable = true; this.emit("drain"); }); }); } /** * Generates uri for connection. * * @api private */ uri() { let query = this.query || {}; const schema = this.opts.secure ? "https" : "http"; let port = ""; // cache busting is forced if (false !== this.opts.timestampRequests) { query[this.opts.timestampParam] = yeast(); } if (!this.supportsBinary && !query.sid) { query.b64 = 1; } query = parseqs.encode(query); // avoid port if default for schema if ( this.opts.port && (("https" === schema && Number(this.opts.port) !== 443) || ("http" === schema && Number(this.opts.port) !== 80)) ) { port = ":" + this.opts.port; } // prepend ? to query if (query.length) { query = "?" + query; } const ipv6 = this.opts.hostname.indexOf(":") !== -1; return ( schema + "://" + (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) + port + this.opts.path + query ); } } module.exports = Polling; ",
    "const globalThis = require("../globalThis"); module.exports = { WebSocket: globalThis.WebSocket || globalThis.MozWebSocket, usingBrowserWebSocket: true, defaultBinaryType: "arraybuffer" }; ",
    "const Transport = require("../transport"); const parser = require("engine.io-parser"); const parseqs = require("parseqs"); const yeast = require("yeast"); const { pick } = require("../util"); const { WebSocket, usingBrowserWebSocket, defaultBinaryType } = require("./websocket-constructor"); const debug = require("debug")("engine.io-client:websocket"); // detect ReactNative environment const isReactNative = typeof navigator !== "undefined" && typeof navigator.product === "string" && navigator.product.toLowerCase() === "reactnative"; class WS extends Transport { /** * WebSocket transport constructor. * * @api {Object} connection options * @api public */ constructor(opts) { super(opts); this.supportsBinary = !opts.forceBase64; } /** * Transport name. * * @api public */ get name() { return "websocket"; } /** * Opens socket. * * @api private */ doOpen() { if (!this.check()) { // let probe timeout return; } const uri = this.uri(); const protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed const opts = isReactNative ? {} : pick( this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity" ); if (this.opts.extraHeaders) { opts.headers = this.opts.extraHeaders; } try { this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts); } catch (err) { return this.emit("error", err); } this.ws.binaryType = this.socket.binaryType || defaultBinaryType; this.addEventListeners(); } /** * Adds event listeners to the socket * * @api private */ addEventListeners() { const self = this; this.ws.onopen = function() { self.onOpen(); }; this.ws.onclose = function() { self.onClose(); }; this.ws.onmessage = function(ev) { self.onData(ev.data); }; this.ws.onerror = function(e) { self.onError("websocket error", e); }; } /** * Writes data to socket. * * @param {Array} array of packets. * @api private */ write(packets) { const self = this; this.writable = false; // encodePacket efficient as it uses WS framing // no need for encodePayload let total = packets.length; let i = 0; const l = total; for (; i < l; i++) { (function(packet) { parser.encodePacket(packet, self.supportsBinary, function(data) { // always create a new object (GH-437) const opts = {}; if (!usingBrowserWebSocket) { if (packet.options) { opts.compress = packet.options.compress; } if (self.opts.perMessageDeflate) { const len = "string" === typeof data ? Buffer.byteLength(data) : data.length; if (len < self.opts.perMessageDeflate.threshold) { opts.compress = false; } } } // Sometimes the websocket has already been closed but the browser didn't // have a chance of informing us about it yet, in that case send will // throw an error try { if (usingBrowserWebSocket) { // TypeError is thrown when passing the second argument on Safari self.ws.send(data); } else { self.ws.send(data, opts); } } catch (e) { debug("websocket closed before onclose event"); } --total || done(); }); })(packets[i]); } function done() { self.emit("flush"); // fake drain // defer to next tick to allow Socket to clear writeBuffer setTimeout(function() { self.writable = true; self.emit("drain"); }, 0); } } /** * Called upon close * * @api private */ onClose() { Transport.prototype.onClose.call(this); } /** * Closes socket. * * @api private */ doClose() { if (typeof this.ws !== "undefined") { this.ws.close(); } } /** * Generates uri for connection. * * @api private */ uri() { let query = this.query || {}; const schema = this.opts.secure ? "wss" : "ws"; let port = ""; // avoid port if default for schema if ( this.opts.port && (("wss" === schema && Number(this.opts.port) !== 443) || ("ws" === schema && Number(this.opts.port) !== 80)) ) { port = ":" + this.opts.port; } // append timestamp to URI if (this.opts.timestampRequests) { query[this.opts.timestampParam] = yeast(); } // communicate binary support capabilities if (!this.supportsBinary) { query.b64 = 1; } query = parseqs.encode(query); // prepend ? to query if (query.length) { query = "?" + query; } const ipv6 = this.opts.hostname.indexOf(":") !== -1; return ( schema + "://" + (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) + port + this.opts.path + query ); } /** * Feature detection for WebSocket. * * @return {Boolean} whether this transport is available. * @api public */ check() { return ( !!WebSocket && !("__initialize" in WebSocket && this.name === WS.prototype.name) ); } } module.exports = WS; ",
    "module.exports.pick = (obj, ...attr) => { return attr.reduce((acc, k) => { if (obj.hasOwnProperty(k)) { acc[k] = obj[k]; } return acc; }, {}); }; ",
    "// browser shim for xmlhttprequest module const hasCORS = require("has-cors"); const globalThis = require("./globalThis"); module.exports = function(opts) { const xdomain = opts.xdomain; // scheme must be same when usign XDomainRequest // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx const xscheme = opts.xscheme; // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default. // https://github.com/Automattic/engine.io-client/pull/217 const enablesXDR = opts.enablesXDR; // XMLHttpRequest can be disabled on IE try { if ("undefined" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) { return new XMLHttpRequest(); } } catch (e) {} // Use XDomainRequest for IE8 if enablesXDR is true // because loading bar keeps flashing when using jsonp-polling // https://github.com/yujiosaka/socke.io-ie8-loading-example try { if ("undefined" !== typeof XDomainRequest && !xscheme && enablesXDR) { return new XDomainRequest(); } } catch (e) {} if (!xdomain) { try { return new globalThis[["Active"].concat("Object").join("X")]( "Microsoft.XMLHTTP" ); } catch (e) {} } }; ",
    "const PACKET_TYPES = Object.create(null); // no Map = no polyfill PACKET_TYPES["open"] = "0"; PACKET_TYPES["close"] = "1"; PACKET_TYPES["ping"] = "2"; PACKET_TYPES["pong"] = "3"; PACKET_TYPES["message"] = "4"; PACKET_TYPES["upgrade"] = "5"; PACKET_TYPES["noop"] = "6"; const PACKET_TYPES_REVERSE = Object.create(null); Object.keys(PACKET_TYPES).forEach(key => { PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key; }); const ERROR_PACKET = { type: "error", data: "parser error" }; module.exports = { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET }; ",
    "const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require("./commons"); const withNativeArrayBuffer = typeof ArrayBuffer === "function"; let base64decoder; if (withNativeArrayBuffer) { base64decoder = require("base64-arraybuffer"); } const decodePacket = (encodedPacket, binaryType) => { if (typeof encodedPacket !== "string") { return { type: "message", data: mapBinary(encodedPacket, binaryType) }; } const type = encodedPacket.charAt(0); if (type === "b") { return { type: "message", data: decodeBase64Packet(encodedPacket.substring(1), binaryType) }; } const packetType = PACKET_TYPES_REVERSE[type]; if (!packetType) { return ERROR_PACKET; } return encodedPacket.length > 1 ? { type: PACKET_TYPES_REVERSE[type], data: encodedPacket.substring(1) } : { type: PACKET_TYPES_REVERSE[type] }; }; const decodeBase64Packet = (data, binaryType) => { if (base64decoder) { const decoded = base64decoder.decode(data); return mapBinary(decoded, binaryType); } else { return { base64: true, data }; // fallback for old browsers } }; const mapBinary = (data, binaryType) => { switch (binaryType) { case "blob": return data instanceof ArrayBuffer ? new Blob([data]) : data; case "arraybuffer": default: return data; // assuming the data is already an ArrayBuffer } }; module.exports = decodePacket; ",
    "const { PACKET_TYPES } = require("./commons"); const withNativeBlob = typeof Blob === "function" || (typeof Blob !== "undefined" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]"); const withNativeArrayBuffer = typeof ArrayBuffer === "function"; // ArrayBuffer.isView method is not defined in IE10 const isView = obj => { return typeof ArrayBuffer.isView === "function" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer; }; const encodePacket = ({ type, data }, supportsBinary, callback) => { if (withNativeBlob && data instanceof Blob) { if (supportsBinary) { return callback(data); } else { return encodeBlobAsBase64(data, callback); } } else if ( withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data)) ) { if (supportsBinary) { return callback(data instanceof ArrayBuffer ? data : data.buffer); } else { return encodeBlobAsBase64(new Blob([data]), callback); } } // plain string return callback(PACKET_TYPES[type] + (data || "")); }; const encodeBlobAsBase64 = (data, callback) => { const fileReader = new FileReader(); fileReader.onload = function() { const content = fileReader.result.split(",")[1]; callback("b" + content); }; return fileReader.readAsDataURL(data); }; module.exports = encodePacket; ",
    "const encodePacket = require("./encodePacket"); const decodePacket = require("./decodePacket"); const SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text const encodePayload = (packets, callback) => { // some packets may be added to the array while encoding, so the initial length must be saved const length = packets.length; const encodedPackets = new Array(length); let count = 0; packets.forEach((packet, i) => { // force base64 encoding for binary packets encodePacket(packet, false, encodedPacket => { encodedPackets[i] = encodedPacket; if (++count === length) { callback(encodedPackets.join(SEPARATOR)); } }); }); }; const decodePayload = (encodedPayload, binaryType) => { const encodedPackets = encodedPayload.split(SEPARATOR); const packets = []; for (let i = 0; i < encodedPackets.length; i++) { const decodedPacket = decodePacket(encodedPackets[i], binaryType); packets.push(decodedPacket); if (decodedPacket.type === "error") { break; } } return packets; }; module.exports = { protocol: 4, encodePacket, encodePayload, decodePacket, decodePayload }; ",
    "/* * base64-arraybuffer * https://github.com/niklasvh/base64-arraybuffer * * Copyright (c) 2012 Niklas von Hertzen * Licensed under the MIT license. */ (function(chars){ "use strict"; exports.encode = function(arraybuffer) { var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = ""; for (i = 0; i < len; i+=3) { base64 += chars[bytes[i] >> 2]; base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)]; base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)]; base64 += chars[bytes[i + 2] & 63]; } if ((len % 3) === 2) { base64 = base64.substring(0, base64.length - 1) + "="; } else if (len % 3 === 1) { base64 = base64.substring(0, base64.length - 2) + "=="; } return base64; }; exports.decode = function(base64) { var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4; if (base64[base64.length - 1] === "=") { bufferLength--; if (base64[base64.length - 2] === "=") { bufferLength--; } } var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer); for (i = 0; i < len; i+=4) { encoded1 = chars.indexOf(base64[i]); encoded2 = chars.indexOf(base64[i+1]); encoded3 = chars.indexOf(base64[i+2]); encoded4 = chars.indexOf(base64[i+3]); bytes[p++] = (encoded1 << 2) | (encoded2 >> 4); bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2); bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63); } return arraybuffer; }; })("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"); ",
    " /** * Module exports. * * Logic borrowed from Modernizr: * * - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js */ try { module.exports = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest(); } catch (err) { // if XMLHttp support is disabled in IE then it will throw // when trying to create module.exports = false; } ",
    "/** * Helpers. */ var s = 1000; var m = s * 60; var h = m * 60; var d = h * 24; var w = d * 7; var y = d * 365.25; /** * Parse or format the given `val`. * * Options: * * - `long` verbose formatting [false] * * @param {String|Number} val * @param {Object} [options] * @throws {Error} throw an error if val is not a non-empty string or a number * @return {String|Number} * @api public */ module.exports = function(val, options) { options = options || {}; var type = typeof val; if (type === 'string' && val.length > 0) { return parse(val); } else if (type === 'number' && isFinite(val)) { return options.long ? fmtLong(val) : fmtShort(val); } throw new Error( 'val is not a non-empty string or a valid number. val=' + JSON.stringify(val) ); }; /** * Parse the given `str` and return milliseconds. * * @param {String} str * @return {Number} * @api private */ function parse(str) { str = String(str); if (str.length > 100) { return; } var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec( str ); if (!match) { return; } var n = parseFloat(match[1]); var type = (match[2] || 'ms').toLowerCase(); switch (type) { case 'years': case 'year': case 'yrs': case 'yr': case 'y': return n * y; case 'weeks': case 'week': case 'w': return n * w; case 'days': case 'day': case 'd': return n * d; case 'hours': case 'hour': case 'hrs': case 'hr': case 'h': return n * h; case 'minutes': case 'minute': case 'mins': case 'min': case 'm': return n * m; case 'seconds': case 'second': case 'secs': case 'sec': case 's': return n * s; case 'milliseconds': case 'millisecond': case 'msecs': case 'msec': case 'ms': return n; default: return undefined; } } /** * Short format for `ms`. * * @param {Number} ms * @return {String} * @api private */ function fmtShort(ms) { var msAbs = Math.abs(ms); if (msAbs >= d) { return Math.round(ms / d) + 'd'; } if (msAbs >= h) { return Math.round(ms / h) + 'h'; } if (msAbs >= m) { return Math.round(ms / m) + 'm'; } if (msAbs >= s) { return Math.round(ms / s) + 's'; } return ms + 'ms'; } /** * Long format for `ms`. * * @param {Number} ms * @return {String} * @api private */ function fmtLong(ms) { var msAbs = Math.abs(ms); if (msAbs >= d) { return plural(ms, msAbs, d, 'day'); } if (msAbs >= h) { return plural(ms, msAbs, h, 'hour'); } if (msAbs >= m) { return plural(ms, msAbs, m, 'minute'); } if (msAbs >= s) { return plural(ms, msAbs, s, 'second'); } return ms + ' ms'; } /** * Pluralization helper. */ function plural(ms, msAbs, n, name) { var isPlural = msAbs >= n * 1.5; return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : ''); } ",
    "/** * Compiles a querystring * Returns string representation of the object * * @param {Object} * @api private */ exports.encode = function (obj) { var str = ''; for (var i in obj) { if (obj.hasOwnProperty(i)) { if (str.length) str += '&'; str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]); } } return str; }; /** * Parses a simple querystring into an object * * @param {String} qs * @api private */ exports.decode = function(qs){ var qry = {}; var pairs = qs.split('&'); for (var i = 0, l = pairs.length; i < l; i++) { var pair = pairs[i].split('='); qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]); } return qry; }; ",
    "/** * Parses an URI * * @author Steven Levithan <stevenlevithan.com> (MIT license) * @api private */ var re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/; var parts = [ 'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor' ]; module.exports = function parseuri(str) { var src = str, b = str.indexOf('['), e = str.indexOf(']'); if (b != -1 && e != -1) { str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length); } var m = re.exec(str || ''), uri = {}, i = 14; while (i--) { uri[parts[i]] = m[i] || ''; } if (b != -1 && e != -1) { uri.source = src; uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':'); uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':'); uri.ipv6uri = true; } uri.pathNames = pathNames(uri, uri['path']); uri.queryKey = queryKey(uri, uri['query']); return uri; }; function pathNames(obj, path) { var regx = /\/{2,9}/g, names = path.replace(regx, "/").split("/"); if (path.substr(0, 1) == '/' || path.length === 0) { names.splice(0, 1); } if (path.substr(path.length - 1, 1) == '/') { names.splice(names.length - 1, 1); } return names; } function queryKey(uri, query) { var data = {}; query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) { if ($1) { data[$1] = $2; } }); return data; } ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.reconstructPacket = exports.deconstructPacket = void 0; const is_binary_1 = require("./is-binary"); /** * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder. * * @param {Object} packet - socket.io event packet * @return {Object} with deconstructed packet and list of buffers * @public */ function deconstructPacket(packet) { const buffers = []; const packetData = packet.data; const pack = packet; pack.data = _deconstructPacket(packetData, buffers); pack.attachments = buffers.length; // number of binary 'attachments' return { packet: pack, buffers: buffers }; } exports.deconstructPacket = deconstructPacket; function _deconstructPacket(data, buffers) { if (!data) return data; if (is_binary_1.isBinary(data)) { const placeholder = { _placeholder: true, num: buffers.length }; buffers.push(data); return placeholder; } else if (Array.isArray(data)) { const newData = new Array(data.length); for (let i = 0; i < data.length; i++) { newData[i] = _deconstructPacket(data[i], buffers); } return newData; } else if (typeof data === "object" && !(data instanceof Date)) { const newData = {}; for (const key in data) { if (data.hasOwnProperty(key)) { newData[key] = _deconstructPacket(data[key], buffers); } } return newData; } return data; } /** * Reconstructs a binary packet from its placeholder packet and buffers * * @param {Object} packet - event packet with placeholders * @param {Array} buffers - binary buffers to put in placeholder positions * @return {Object} reconstructed packet * @public */ function reconstructPacket(packet, buffers) { packet.data = _reconstructPacket(packet.data, buffers); packet.attachments = undefined; // no longer useful return packet; } exports.reconstructPacket = reconstructPacket; function _reconstructPacket(data, buffers) { if (!data) return data; if (data && data._placeholder) { return buffers[data.num]; // appropriate buffer (should be natural order anyway) } else if (Array.isArray(data)) { for (let i = 0; i < data.length; i++) { data[i] = _reconstructPacket(data[i], buffers); } } else if (typeof data === "object") { for (const key in data) { if (data.hasOwnProperty(key)) { data[key] = _reconstructPacket(data[key], buffers); } } } return data; } ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0; const Emitter = require("component-emitter"); const binary_1 = require("./binary"); const is_binary_1 = require("./is-binary"); const debug = require("debug")("socket.io-parser"); /** * Protocol version. * * @public */ exports.protocol = 5; var PacketType; (function (PacketType) { PacketType[PacketType["CONNECT"] = 0] = "CONNECT"; PacketType[PacketType["DISCONNECT"] = 1] = "DISCONNECT"; PacketType[PacketType["EVENT"] = 2] = "EVENT"; PacketType[PacketType["ACK"] = 3] = "ACK"; PacketType[PacketType["CONNECT_ERROR"] = 4] = "CONNECT_ERROR"; PacketType[PacketType["BINARY_EVENT"] = 5] = "BINARY_EVENT"; PacketType[PacketType["BINARY_ACK"] = 6] = "BINARY_ACK"; })(PacketType = exports.PacketType || (exports.PacketType = {})); /** * A socket.io Encoder instance */ class Encoder { /** * Encode a packet as a single string if non-binary, or as a * buffer sequence, depending on packet type. * * @param {Object} obj - packet object */ encode(obj) { debug("encoding packet %j", obj); if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) { if (is_binary_1.hasBinary(obj)) { obj.type = obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK; return this.encodeAsBinary(obj); } } return [this.encodeAsString(obj)]; } /** * Encode packet as string. */ encodeAsString(obj) { // first is type let str = "" + obj.type; // attachments if we have them if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) { str += obj.attachments + "-"; } // if we have a namespace other than `/` // we append it followed by a comma `,` if (obj.nsp && "/" !== obj.nsp) { str += obj.nsp + ","; } // immediately followed by the id if (null != obj.id) { str += obj.id; } // json data if (null != obj.data) { str += JSON.stringify(obj.data); } debug("encoded %j as %s", obj, str); return str; } /** * Encode packet as 'buffer sequence' by removing blobs, and * deconstructing packet into object with placeholders and * a list of buffers. */ encodeAsBinary(obj) { const deconstruction = binary_1.deconstructPacket(obj); const pack = this.encodeAsString(deconstruction.packet); const buffers = deconstruction.buffers; buffers.unshift(pack); // add packet info to beginning of data list return buffers; // write all the buffers } } exports.Encoder = Encoder; /** * A socket.io Decoder instance * * @return {Object} decoder */ class Decoder extends Emitter { constructor() { super(); } /** * Decodes an encoded packet string into packet JSON. * * @param {String} obj - encoded packet */ add(obj) { let packet; if (typeof obj === "string") { packet = this.decodeString(obj); if (packet.type === PacketType.BINARY_EVENT || packet.type === PacketType.BINARY_ACK) { // binary packet's json this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow if (packet.attachments === 0) { super.emit("decoded", packet); } } else { // non-binary full packet super.emit("decoded", packet); } } else if (is_binary_1.isBinary(obj) || obj.base64) { // raw binary data if (!this.reconstructor) { throw new Error("got binary data when not reconstructing a packet"); } else { packet = this.reconstructor.takeBinaryData(obj); if (packet) { // received final buffer this.reconstructor = null; super.emit("decoded", packet); } } } else { throw new Error("Unknown type: " + obj); } } /** * Decode a packet String (JSON data) * * @param {String} str * @return {Object} packet */ decodeString(str) { let i = 0; // look up type const p = { type: Number(str.charAt(0)), }; if (PacketType[p.type] === undefined) { throw new Error("unknown packet type " + p.type); } // look up attachments if type binary if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) { const start = i + 1; while (str.charAt(++i) !== "-" && i != str.length) { } const buf = str.substring(start, i); if (buf != Number(buf) || str.charAt(i) !== "-") { throw new Error("Illegal attachments"); } p.attachments = Number(buf); } // look up namespace (if any) if ("/" === str.charAt(i + 1)) { const start = i + 1; while (++i) { const c = str.charAt(i); if ("," === c) break; if (i === str.length) break; } p.nsp = str.substring(start, i); } else { p.nsp = "/"; } // look up id const next = str.charAt(i + 1); if ("" !== next && Number(next) == next) { const start = i + 1; while (++i) { const c = str.charAt(i); if (null == c || Number(c) != c) { --i; break; } if (i === str.length) break; } p.id = Number(str.substring(start, i + 1)); } // look up json data if (str.charAt(++i)) { const payload = tryParse(str.substr(i)); if (Decoder.isPayloadValid(p.type, payload)) { p.data = payload; } else { throw new Error("invalid payload"); } } debug("decoded %s as %j", str, p); return p; } static isPayloadValid(type, payload) { switch (type) { case PacketType.CONNECT: return typeof payload === "object"; case PacketType.DISCONNECT: return payload === undefined; case PacketType.CONNECT_ERROR: return typeof payload === "string" || typeof payload === "object"; case PacketType.EVENT: case PacketType.BINARY_EVENT: return Array.isArray(payload) && payload.length > 0; case PacketType.ACK: case PacketType.BINARY_ACK: return Array.isArray(payload); } } /** * Deallocates a parser's resources */ destroy() { if (this.reconstructor) { this.reconstructor.finishedReconstruction(); } } } exports.Decoder = Decoder; function tryParse(str) { try { return JSON.parse(str); } catch (e) { return false; } } /** * A manager of a binary event's 'buffer sequence'. Should * be constructed whenever a packet of type BINARY_EVENT is * decoded. * * @param {Object} packet * @return {BinaryReconstructor} initialized reconstructor */ class BinaryReconstructor { constructor(packet) { this.packet = packet; this.buffers = []; this.reconPack = packet; } /** * Method to be called when binary data received from connection * after a BINARY_EVENT packet. * * @param {Buffer | ArrayBuffer} binData - the raw binary data received * @return {null | Object} returns null if more binary data is expected or * a reconstructed packet object if all buffers have been received. */ takeBinaryData(binData) { this.buffers.push(binData); if (this.buffers.length === this.reconPack.attachments) { // done with buffer list const packet = binary_1.reconstructPacket(this.reconPack, this.buffers); this.finishedReconstruction(); return packet; } return null; } /** * Cleans up binary packet reconstruction variables. */ finishedReconstruction() { this.reconPack = null; this.buffers = []; } } ",
    ""use strict"; Object.defineProperty(exports, "__esModule", { value: true }); exports.hasBinary = exports.isBinary = void 0; const withNativeArrayBuffer = typeof ArrayBuffer === "function"; const isView = (obj) => { return typeof ArrayBuffer.isView === "function" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer; }; const toString = Object.prototype.toString; const withNativeBlob = typeof Blob === "function" || (typeof Blob !== "undefined" && toString.call(Blob) === "[object BlobConstructor]"); const withNativeFile = typeof File === "function" || (typeof File !== "undefined" && toString.call(File) === "[object FileConstructor]"); /** * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File. * * @private */ function isBinary(obj) { return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) || (withNativeBlob && obj instanceof Blob) || (withNativeFile && obj instanceof File)); } exports.isBinary = isBinary; function hasBinary(obj, toJSON) { if (!obj || typeof obj !== "object") { return false; } if (Array.isArray(obj)) { for (let i = 0, l = obj.length; i < l; i++) { if (hasBinary(obj[i])) { return true; } } return false; } if (isBinary(obj)) { return true; } if (obj.toJSON && typeof obj.toJSON === "function" && arguments.length === 1) { return hasBinary(obj.toJSON(), true); } for (const key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) { return true; } } return false; } exports.hasBinary = hasBinary; ",
    "'use strict'; var alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('') , length = 64 , map = {} , seed = 0 , i = 0 , prev; /** * Return a string representing the specified number. * * @param {Number} num The number to convert. * @returns {String} The string representation of the number. * @api public */ function encode(num) { var encoded = ''; do { encoded = alphabet[num % length] + encoded; num = Math.floor(num / length); } while (num > 0); return encoded; } /** * Return the integer value specified by the given string. * * @param {String} str The string to convert. * @returns {Number} The integer value represented by the string. * @api public */ function decode(str) { var decoded = 0; for (i = 0; i < str.length; i++) { decoded = decoded * length + map[str.charAt(i)]; } return decoded; } /** * Yeast: A tiny growing id generator. * * @returns {String} A unique id. * @api public */ function yeast() { var now = encode(+new Date()); if (now !== prev) return seed = 0, prev = now; return now +'.'+ encode(seed++); } // // Map each character to its index. // for (; i < length; i++) map[alphabet[i]] = i; // // Expose the `yeast`, `encode` and `decode` functions. // yeast.encode = encode; yeast.decode = decode; module.exports = yeast; "
    ],
    sourceRoot: ""
    }